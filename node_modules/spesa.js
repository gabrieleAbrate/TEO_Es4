// primo metodo per la creazione di una classe in javascript (function)
/*function Spesa(){
    let data;

    let getData = () => {
        return data;
    }
}*/

// secondo metodo per la creazione di una classe in javascript (prototype)
// serve ad estendere e modificare una classe già esistente (solo la usa istanza, non la classe)
/*let s = new Spesa();
s.prototype.setData = (data) => {
    this.data = data;
}*/

// terzo metodo per la creazione di una classe in javascript (object | json)
/*let obj = {
    data: null,
    getData: () => {
        return this.data;
    }
};*/

// quarto metodo per la creazione di una classe in javascript (ES6)
/*
    - non esiste l'overloading / polimorfismo dei metodi
    - il costruttore può anche non essere definito
    - non si può gestire la diversa visibilità dei metodi e delle proprietà
    - ora esiste la possibilità di gestire la visibilità delle variabili (#)
    - non esistono le interfacce e le classi astratte
*/
/*
    se ho il trattino (_) davanti al nome della proprietà, è un modo per indicarne la sua privatazza
    export => rende la classe visibile all'esterno del file
    import => importa la classe da un altro file
    default => indica che la classe è quella principale del file
*/

// esporto una classe per la import di ES6 quindi a livello di client (export default) (export default class Spesa)
class Spesa{
    #data = null;
    #negozio = null;
    #utente;
    #importo;

    get data(){
        if(this._data)
            return this.#data;
        else
            return null;
    }

    set data(data){
        if(data instanceof Date)
            this.#data = data;
        else
            throw 'data deve essere di tipo Date';
    }

    // posso inserire nuovi parametri nel costruttore, come ad esempio _importo
    // data = new Date() => è un parametro opzionale, se non viene passato, viene utilizzato il valore di default

    constructor(negozio, importo, utente, data = new Date()){
        // this.data => richiamo il metodo get data() e non la proprietà _data
        this.#data = data;
        this.#negozio = negozio;
        this.#importo = importo;
        this.#utente = utente;
    }

    toString(){
        return `spesa effettuata in data ${this.#data.getDate()}/${this.#data.getMonth() + 1}/${this.#data.getFullYear()} da ${this.#utente} presso ${this.#negozio} per un importo di ${this.#importo} euro`;
    }
}

// esporto una classe per la require di nodejs
module.exports = Spesa;

/*
let s = new Spesa('carrefour', 10, 'mario');
console.log(s.data);
// console.log(s.#negozio) => questo qua non può funzionare perchè è privato
*/